<div class="chat-layout">

  <%= render "shared/sidenav" %>

  <div class="chat-content">

    <%= link_to "← Voltar", root_path, class: "btn-back" %>

    <!-- BARRA DE PESQUISA -->
    <div class="search-box">
      <input
        type="text"
        id="chatSearch"
        placeholder="Pesquisar chat..."
        onkeyup="filterChats()"
      >
    </div>

    <h2 class="page-title">históricos chats</h2>

    <% @conversations.each do |conversation| %>
      <div class="chat-card">

        <div>
          <div class="chat-title">
            <%= conversation.title.presence || "Chat sem título" %>
          </div>

          <div class="chat-time">
            <i class="fa-regular fa-clock"></i>
            <%= l(conversation.created_at, format: "%d/%m/%Y %H:%M") %>
          </div>
        </div>

        <div>
          <%= link_to "Abrir", conversation_path(conversation), class: "btn-open" %>

          <%= link_to "Excluir", conversation_path(conversation),
              data: { turbo_method: :delete, turbo_confirm: "Excluir este chat?" },
              class: "btn-delete" %>
        </div>

      </div>
    <% end %>

  </div>

</div>
